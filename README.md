<h1 align="center">AI Agents for Portfolio Construction</h1>


Our project aims to provide a stock screening agent that can provide buy/hold/sell signals based on historical data, and use these signals to construct a portfolio with better performance based on the out of sample Sharpe ratio.

## Available Data
- Size, book-to-value, and 12 month momentum data from CRSP/Compustat, for S&P500 firms only. 

## Important notebooks
- Our project is stored in the AI Portfolio Selection notebook.
- Agentics stock selection.ipynb contains the CrewAI code for LLM stock selection
- The buys and sells for year x are stored in buys_{x}.csv and sells_{x}.csv, respectively; the scoring rules and its associated explanation are in systematic_strategy_{x}.txt
- nodewise LLM.ipynb tests nodewise regression with the buys and sells generated by the LLM
- nodewise baseline.ipynb tests nodewise regression with all the S&P500 firms

### Installation

1. Clone the repository:
```bash
cd portfolio-construction
```

2. Create and activate a virtual environment:
```bash
python -m venv venv  # make sure to use python >3.9 and <=3.12
source venv/bin/activate  # On Windows: venv\Scripts\activate
```

3. Install dependencies:
```bash
pip install -r requirements.txt
```

4. When running Agentics stock selection.ipynb, you will need a Gemini API code. You will be prompted to enter it when running the notebook.

### Running the application

First obtain the appropriate data from CRSP/Compustat. Due to the size of the datasets, we are unable to commit our dataset to Github.

Then run Agentics stock selection.ipynb in Jupyter notebook. For multi-year recommendations, simply change all instances of the year to the year desired. The scoring rule should be stored in systematic_strategy_{x}.txt for year x.

strategy implementation.ipynb implements systematic_strategy_{x}.txt to create a list of buys and sells, named buys_{x}.csv and sells_{x}.csv for year x.

Lastly, run nodewise baseline.ipynb for the nodewise regression baseline model, and nodewise LLM.ipynb for nodewise regression on the buys and sells for each year. We have included deep learning and residual nodewise methods, comparing the baseline model and the model trading on our buy and sell signals, for robustness.

Note: The above returns the global minimum variance portfolio. We also consider different client objective functions, such as mean-variance utility and the maximum Sharpe ratio objective. This code can be found in the folders named "MSR objective" and "MV objective".


## Authors

- *Nathan Sun*, Columbia IEOR, ns3903@columbia.edu
- *Jonathan Tan*, Columbia IEOR, jyt2123@columbia.edu
